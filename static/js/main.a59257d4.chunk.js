(this.webpackJsonpinterleave_testnet_frontend=this.webpackJsonpinterleave_testnet_frontend||[]).push([[0],{202:function(e,t,n){},253:function(e,t){},254:function(e,t){},447:function(e,t){},449:function(e,t){},483:function(e,t,n){"use strict";n.r(t);var c=n(10),a=n.n(c),s=n(195),i=n.n(s),o=(n(202),n(197)),r=n(23),l=n.n(r),u=n(50),d=n(106),p=n.p+"static/media/Neptunus Text Right 1.7e349a79.png",b=n(0),j=function(e){var t=null,n=null;return e&&(t=e.publicKey,n=e.loginFreighter),Object(b.jsxs)("header",{children:[Object(b.jsx)("img",{src:p,height:"45",alt:"",className:"logo"}),t&&Object(b.jsxs)("div",{className:"account",children:[Object(b.jsx)("a",{href:"https://stellar.expert/explorer/testnet/account/".concat(t),target:"_blank",className:"public-key",rel:"noopener noreferrer",children:t}),Object(b.jsx)("button",{onClick:n,className:"refresh",children:"Refresh Account"})]})]})},f=n(4),m=function(e){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("option",{value:"".concat(e.balance,"_").concat(e.code,"_").concat(e.issuer),children:e.code})})},h=function(e){var t=e.transactionId;return Object(b.jsxs)("li",{children:["sucessfully transaction with id"," ",Object(b.jsx)("a",{href:"https://stellar.expert/explorer/testnet/tx/".concat(t),rel:"noopener noreferrer",target:"_blank",children:t})]})},O=function(e){var t=e.notificationContent,n=e.notificationColor,a=e.closeNotification;return Object(c.useEffect)((function(){setTimeout((function(){a()}),1e4)})),Object(b.jsx)("div",{className:"notification",style:{backgroundColor:n},children:Object(b.jsx)("div",{className:"notification-content",children:t})})},v=function(e){var t=e.state,n=e.handleSubmit,c=e.handleChange,a=e.loginFreighter,s=e.closeNotification,i=e.setMaxBalance,o=t.account,r=t.amountSend,l=t.amountReceive,u=t.assetSend,d=t.slippage,p=t.isNotificationOpen,j=t.notificationContent,v=t.notificationColor,N=t.isSubmitting,x=t.listTransaction;return Object(b.jsx)("section",{children:Object(b.jsx)("div",{className:"section-center",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"transaction-form",children:[Object(b.jsx)("div",{className:"form-header",children:Object(b.jsx)("h1",{children:"Swap Asset"})}),p&&Object(b.jsx)(O,{notificationColor:v,notificationContent:j,closeNotification:s}),Object(b.jsxs)("form",{onSubmit:n,children:[Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-sm-7",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("span",{className:"form-label",children:"Amount Send"}),Object(b.jsx)("input",{type:"number",step:1e-7,id:"amountSend",name:"amountSend",value:r,onChange:c,placeholder:"0.0000000",min:"0",className:"form-control"}),u&&Object(b.jsxs)("span",{className:"form-label balance",children:["Balances:"," ",Object(b.jsx)("span",{className:"amount",onClick:i,children:u.balance})," ",u.code]})]})}),Object(b.jsx)("div",{className:"col-sm-5",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("span",{className:"form-label",children:"Asset Send"}),Object(b.jsxs)("select",{name:"assetSend",onChange:c,className:"form-control",children:[Object(b.jsx)("option",{value:"",children:"Select Asset Type"}),o&&o.listAsset.map((function(e){return Object(b.jsx)(m,Object(f.a)({},e),"".concat(e.code,"_").concat(e.issuer))}))]}),Object(b.jsx)("span",{className:"select-arrow"})]})})]}),Object(b.jsxs)("div",{className:"row",children:[Object(b.jsx)("div",{className:"col-sm-7",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("span",{className:"form-label",children:"Estimated Amount Receive"}),Object(b.jsx)("input",{type:"number",step:1e-7,id:"amountReceive",name:"amountReceive",value:l,placeholder:"Estimate From Amount Send",className:"form-control",readOnly:!0})]})}),Object(b.jsx)("div",{className:"col-sm-5",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("span",{className:"form-label",children:"Asset Receive"}),Object(b.jsxs)("select",{name:"assetReceive",onChange:c,className:"form-control",children:[Object(b.jsx)("option",{value:"",children:"Select Asset Type"}),o&&o.listAsset.map((function(e){return Object(b.jsx)(m,Object(f.a)({},e),"".concat(e.code,"_").concat(e.issuer))}))]}),Object(b.jsx)("span",{className:"select-arrow"})]})})]}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"col-sm-5 m-auto",children:Object(b.jsxs)("div",{className:"form-group",children:[Object(b.jsx)("span",{className:"form-label",children:"Slippage Tolerance"}),Object(b.jsx)("input",{type:"number",step:.01,id:"slippage",name:"slippage",value:d,onChange:c,placeholder:"value between 0%-100% (default 0.01%)",max:"100.00",min:"0.00",className:"form-control"})]})})}),Object(b.jsx)("div",{className:"row",children:Object(b.jsx)("div",{className:"form-btn",children:o?N?Object(b.jsx)("button",{type:"submit",className:"submit-btn",disabled:!0,style:{backgroundColor:"rgb(5, 1, 255, 0.8)"},children:"Submitting....."}):Object(b.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"}):Object(b.jsx)("button",{onClick:a,className:"submit-btn",children:"Login With Freighter"})})})]})]})}),x.length>=1&&Object(b.jsx)("div",{className:"row",children:Object(b.jsxs)("div",{className:"list-transaction",children:[Object(b.jsx)("div",{className:"list-transaction-header",children:"List Transaction Submitted"}),Object(b.jsx)("div",{className:"list-transaction-body",children:Object(b.jsx)("ul",{children:x.map((function(e){return Object(b.jsx)(h,{transactionId:e},e)}))})})]})})]})})})},N=n(71),x=function(e,t){if("SUCCESS_SUBMIT_XDR"===t.type)return Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Transaction Success",notificationColor:"#2eb94c",isSubmitting:!1});if("CANNOT_SUBMIT_XDR"===t.type)return Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Transaction Failed",notificationColor:"#ec5f0d",isSubmitting:!1});if("NO_VALUE"===t.type)return Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Please Enter Amount Send, Asset Send, and Asset Receive",notificationColor:"#ec5f0d"});if("CHANGE_VALUE"===t.type){var n=t.payload,c=n.name,a=n.value;return Object(f.a)(Object(f.a)({},e),{},Object(N.a)({},c,a))}return"CLOSE_NOTIFICATION"===t.type?Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!1,notificationContent:null,notificationColor:null}):"FREIGHTER_NOT_INSTALLED"===t.type?Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"You Must Install Freighter In Your Browser",notificationColor:"#ec5f0d"}):"CANNOT_GET_AMOUNT_RECEIVE"===t.type?Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Cannot Get Amount Receive",notificationColor:"#ec5f0d"}):"CANNOT_GET_LIST_ASSET"===t.type?Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Cannot Get List Asset",notificationColor:"#ec5f0d"}):"CANNOT_LOGIN"===t.type?Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Cannot Login",notificationColor:"#ec5f0d"}):"PROCESSING_TRANSACTION"===t.type?Object(f.a)(Object(f.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Processing Transaction",notificationColor:"#ec5f0d",isSubmitting:!0}):void 0},_={account:null,assetSend:null,assetReceive:null,amountSend:"",amountReceive:"",slippage:"",isNotificationOpen:!1,notificationContent:null,notificationColor:null,isSubmitting:!1,listTransaction:[]},C=n(196),g=n.n(C),S=n(51),T=n(105),y=n.n(T);var E=function(){var e=Object(c.useReducer)(x,_),t=Object(d.a)(e,2),n=t[0],s=t[1],i=n.account,r=n.assetSend,p=n.assetReceive,f=n.amountSend,m=n.amountReceive,h=n.slippage,O=n.listTransaction,N=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.get(t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,a,r,u,d,p,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N(t);case 3:return n=e.sent,c=n.xdr,e.next=7,Object(S.signTransaction)(c,i.network);case 7:return c=e.sent,a="","TESTNET"===i.network?a="https://horizon-testnet.stellar.org":"PUBLIC"===i.network&&(a="https://horizon.stellar.org"),console.log("xdr",c),r=new y.a.Server(a),u=y.a.TransactionBuilder.fromXDR(c,a),e.next=15,r.submitTransaction(u);case 15:d=e.sent,s({type:"SUCCESS_SUBMIT_XDR"}),"listTransaction",p=d.id,b=[].concat(Object(o.a)(O),[p]),s({type:"CHANGE_VALUE",payload:{name:"listTransaction",value:b}}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),s({type:"CANNOT_SUBMIT_XDR"});case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,c,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(S.isConnected)()){e.next=27;break}return t="",n="",c="",e.prev=4,e.next=7,Object(S.getPublicKey)();case 7:return t=e.sent,e.next=10,Object(S.getNetwork)();case 10:n=e.sent,e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),s({type:"CANNOT_LOGIN"});case 16:return"TESTNET"===n?c="https://horizon-testnet.stellar.org/accounts/".concat(t):"PUBLIC"===n&&(c="https://horizon.stellar.org/accounts/".concat(t)),e.next=19,N(c).then((function(e){return e.balances}));case 19:a=e.sent,i=[],a.forEach((function(e){"native"===e.asset_type?i.push({balance:e.balance,code:"XLM"}):"liquidity_pool_shares"!==e.asset_type&&1e-7!==e.balance&&i.push({balance:e.balance,code:e.asset_code,issuer:e.asset_issuer})})),"account",s({type:"CHANGE_VALUE",payload:{name:"account",value:{publicKey:t,listAsset:i,network:n}}}),e.next=28;break;case 27:s({type:"FREIGHTER_NOT_INSTALLED"});case 28:case"end":return e.stop()}}),e,null,[[4,13]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(i&&f&&r&&p&&f>=0){var e=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="amountReceive",e.next=4,N(t).then((function(e){return e.amount_receive}));case 4:c=e.sent,s({type:"CHANGE_VALUE",payload:{name:n,value:c}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s({type:"CANNOT_GET_AMOUNT_RECEIVE"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t="https://ph7wlb.deta.dev/fetch_amount_receive?",n=[];n.push("asset_send_code=".concat(r.code,"&")),"XLM"!==r.code&&n.push("asset_send_issuer=".concat(r.issuer,"&")),n.push("asset_receive_code=".concat(p.code,"&")),"XLM"!==p.code&&n.push("asset_receive_issuer=".concat(p.issuer,"&")),n.push("amount_send=".concat(f,"&")),"TESTNET"===i.network?n.push("is_testnet=".concat(!0)):"PUBLIC"===i.network&&n.push("is_testnet=".concat(!1)),n.forEach((function(e){t+=e})),e(t);var c=setInterval((function(){e(t)}),1e4);return function(){return clearInterval(c)}}if(!f){s({type:"CHANGE_VALUE",payload:{name:"amountReceive",value:""}})}}),[f,r,p,i]),Object(b.jsxs)(a.a.Fragment,{children:[i?Object(b.jsx)(j,{publicKey:i.publicKey,loginFreighter:T}):Object(b.jsx)(j,{}),Object(b.jsx)(v,{state:n,handleSubmit:function(e){if(e.preventDefault(),i&&r&&p&&f&&m){s({type:"PROCESSING_TRANSACTION"});var t="https://ph7wlb.deta.dev/fetch_xdr?",n=[];n.push("public_key=".concat(i.publicKey,"&")),n.push("asset_send_code=".concat(r.code,"&")),"XLM"!==r.code&&n.push("asset_send_issuer=".concat(r.issuer,"&")),n.push("asset_receive_code=".concat(p.code,"&")),"XLM"!==p.code&&n.push("asset_receive_issuer=".concat(p.issuer,"&")),n.push("amount_send=".concat(f,"&")),h?n.push("slippage=".concat(h,"&")):n.push("slippage=0.01&"),"TESTNET"===i.network?n.push("is_testnet=".concat(!0)):"PUBLIC"===i.network&&n.push("is_testnet=".concat(!1)),n.forEach((function(e){t+=e})),C(t)}else i&&s({type:"NO_VALUE"})},handleChange:function(e){var t=e.target.name,n=e.target.value;if("amountSend"===t||"amountReceive"===t||"slippage"===t)n=n?parseFloat(n):"";else if("assetSend"===t||"assetReceive"===t){var c=n.split("_"),a=Object(d.a)(c,3),i=a[0],o=a[1],r=a[2];n="native"===o?{balance:i,code:"native"}:{balance:i,code:o,issuer:r}}s({type:"CHANGE_VALUE",payload:{name:t,value:n}})},loginFreighter:T,closeNotification:function(){s({type:"CLOSE_NOTIFICATION"})},setMaxBalance:function(){var e=r.balance;s({type:"CHANGE_VALUE",payload:{name:"amountSend",value:e}})}})]})},A=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,484)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(E,{})}),document.getElementById("root")),A()}},[[483,1,2]]]);
//# sourceMappingURL=main.a59257d4.chunk.js.map