(this.webpackJsonpinterleave_testnet_frontend=this.webpackJsonpinterleave_testnet_frontend||[]).push([[0],{203:function(e,t,n){},254:function(e,t){},255:function(e,t){},448:function(e,t){},450:function(e,t){},484:function(e,t,n){"use strict";n.r(t);var c=n(10),a=n.n(c),s=n(196),i=n.n(s),o=(n(203),n(198)),r=n(23),l=n.n(r),u=n(50),d=n(107),b=n.p+"static/media/Neptunus Text Right 1.7e349a79.png",p=n(0),j=function(e){var t=null,n=null;return e&&(t=e.publicKey,n=e.loginFreighter),Object(p.jsxs)("header",{children:[Object(p.jsx)("img",{src:b,height:"45",alt:"",className:"logo"}),t&&Object(p.jsxs)("div",{className:"account",children:[Object(p.jsx)("a",{href:"https://stellar.expert/explorer/testnet/account/".concat(t),target:"_blank",className:"public-key",rel:"noopener noreferrer",children:t}),Object(p.jsx)("button",{onClick:n,className:"refresh",children:"Refresh Account"})]})]})},m=n(4),f=n(105),h=n.n(f),O=function(e){return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("option",{value:"".concat(e.balance,"_").concat(e.code,"_").concat(e.issuer),children:e.code})})},N=function(e){var t=e.transaction;return Object(p.jsxs)("li",{children:["sucessfully transaction with id"," ",Object(p.jsx)("a",{href:"https://stellar.expert/explorer/".concat(t.network,"/tx/").concat(t.id),rel:"noopener noreferrer",target:"_blank",children:t.id})]})},v=function(e){var t=e.notificationContent,n=e.notificationColor,a=e.closeNotification;return Object(c.useEffect)((function(){setTimeout((function(){a()}),1e4)})),Object(p.jsx)("div",{className:"notification",style:{backgroundColor:n},children:Object(p.jsx)("div",{className:"notification-content",children:t})})},x=function(e){var t=e.state,n=e.handleSubmit,c=e.handleChange,s=e.loginFreighter,i=e.closeNotification,o=e.setMaxBalance,r=t.account,l=t.amountSend,u=t.amountReceive,d=t.assetSend,b=t.assetReceive,j=t.slippage,f=t.isNotificationOpen,x=t.notificationContent,_=t.notificationColor,C=t.isSubmitting,g=t.listTransaction;return Object(p.jsx)("section",{children:Object(p.jsx)("div",{className:"section-center",children:Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"transaction-form",children:[Object(p.jsx)("div",{className:"form-header",children:Object(p.jsx)("h1",{children:"Swap Asset"})}),f&&Object(p.jsx)(v,{notificationColor:_,notificationContent:x,closeNotification:i}),Object(p.jsxs)("form",{onSubmit:n,children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-sm-7",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("span",{className:"form-label",children:"Amount Send"}),Object(p.jsx)("input",{type:"number",step:1e-7,id:"amountSend",name:"amountSend",value:l,onChange:c,placeholder:"0.0000000",min:"0",className:"form-control"}),d&&Object(p.jsxs)("span",{className:"form-label balance",children:["Balances:"," ",Object(p.jsx)("span",{className:"amount",onClick:o,name:"balance-send",children:d.balance})," ",d.code]})]})}),Object(p.jsx)("div",{className:"col-sm-5",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("span",{className:"form-label",children:"Asset Send"}),Object(p.jsxs)("select",{name:"assetSend",onChange:c,className:"form-control",children:[Object(p.jsx)("option",{value:"",children:"Select Asset Type"}),r&&r.listAsset.map((function(e){return b&&!h.a.isEqual(e,b)||!b?Object(p.jsx)(O,Object(m.a)({},e),"".concat(e.code,"_").concat(e.issuer)):Object(p.jsx)(a.a.Fragment,{children:" "},"none")}))]}),Object(p.jsx)("span",{className:"select-arrow"})]})})]}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-sm-7",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("span",{className:"form-label",children:"Estimated Amount Receive"}),Object(p.jsx)("input",{type:"number",step:1e-7,id:"amountReceive",name:"amountReceive",value:u,placeholder:"Estimate From Amount Send",className:"form-control",readOnly:!0}),b&&Object(p.jsxs)("span",{className:"form-label balance",children:["Balances:"," ",Object(p.jsx)("span",{className:"amount",children:b.balance})," ",b.code]})]})}),Object(p.jsx)("div",{className:"col-sm-5",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("span",{className:"form-label",children:"Asset Receive"}),Object(p.jsxs)("select",{name:"assetReceive",onChange:c,className:"form-control",children:[Object(p.jsx)("option",{value:"",children:"Select Asset Type"}),r&&r.listAsset.map((function(e){return d&&!h.a.isEqual(d,e)||!d?Object(p.jsx)(O,Object(m.a)({},e),"".concat(e.code,"_").concat(e.issuer)):Object(p.jsx)(a.a.Fragment,{children:" "},"none")}))]}),Object(p.jsx)("span",{className:"select-arrow"})]})})]}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"col-sm-5 m-auto",children:Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("span",{className:"form-label",children:"Slippage Tolerance"}),Object(p.jsx)("input",{type:"number",step:.01,id:"slippage",name:"slippage",value:j,onChange:c,placeholder:"value between 0%-100% (default 0.01%)",max:"100.00",min:"0.00",className:"form-control"})]})})}),Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("div",{className:"form-btn",children:r?C?Object(p.jsx)("button",{type:"submit",className:"submit-btn",disabled:!0,style:{backgroundColor:"rgb(5, 1, 255, 0.8)"},children:"Submitting....."}):Object(p.jsx)("button",{type:"submit",className:"submit-btn",children:"Submit"}):Object(p.jsx)("button",{onClick:s,className:"submit-btn",children:"Login With Freighter"})})})]})]})}),g.length>=1&&Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"list-transaction",children:[Object(p.jsx)("div",{className:"list-transaction-header",children:"List Transaction Submitted"}),Object(p.jsx)("div",{className:"list-transaction-body",children:Object(p.jsx)("ul",{children:g.map((function(e){return Object(p.jsx)(N,{transaction:e},e.id)}))})})]})})]})})})},_=n(71),C=function(e,t){if("SUCCESS_SUBMIT_XDR"===t.type)return Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Transaction Success",notificationColor:"#2eb94c",isSubmitting:!1});if("CANNOT_SUBMIT_XDR"===t.type)return Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Transaction Failed",notificationColor:"#ec5f0d",isSubmitting:!1});if("NO_VALUE"===t.type)return Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Please Enter Amount Send, Asset Send, and Asset Receive",notificationColor:"#ec5f0d"});if("CHANGE_VALUE"===t.type){var n=t.payload,c=n.name,a=n.value;return Object(m.a)(Object(m.a)({},e),{},Object(_.a)({},c,a))}return"CLOSE_NOTIFICATION"===t.type?Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!1,notificationContent:null,notificationColor:null}):"FREIGHTER_NOT_INSTALLED"===t.type?Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"You Must Install Freighter In Your Browser",notificationColor:"#ec5f0d"}):"CANNOT_GET_AMOUNT_RECEIVE"===t.type?Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Cannot Get Amount Receive",notificationColor:"#ec5f0d"}):"CANNOT_GET_LIST_ASSET"===t.type?Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Cannot Get List Asset",notificationColor:"#ec5f0d"}):"CANNOT_LOGIN"===t.type?Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Cannot Login",notificationColor:"#ec5f0d"}):"PROCESSING_TRANSACTION"===t.type?Object(m.a)(Object(m.a)({},e),{},{isNotificationOpen:!0,notificationContent:"Processing Transaction",notificationColor:"#ec5f0d",isSubmitting:!0}):void 0},g={account:null,assetSend:null,assetReceive:null,amountSend:"",amountReceive:"",slippage:"",isNotificationOpen:!1,notificationContent:null,notificationColor:null,isSubmitting:!1,listTransaction:[]},S=n(197),T=n.n(S),y=n(51),E=n(106),A=n.n(E);var w=function(){var e=Object(c.useReducer)(C,g),t=Object(d.a)(e,2),n=t[0],s=t[1],i=n.account,r=n.assetSend,b=n.assetReceive,m=n.amountSend,f=n.slippage,h=n.listTransaction,O=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.get(t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c,a,r,u,d,b,p;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(t);case 3:return n=e.sent,c=n.xdr,e.next=7,Object(y.signTransaction)(c,i.network);case 7:return c=e.sent,a="","TESTNET"===i.network?a="https://horizon-testnet.stellar.org":"PUBLIC"===i.network&&(a="https://horizon.stellar.org"),r=new A.a.Server(a),u=A.a.TransactionBuilder.fromXDR(c,a),e.next=14,r.submitTransaction(u);case 14:d=e.sent,s({type:"SUCCESS_SUBMIT_XDR"}),"listTransaction",b=d.id,p=[].concat(Object(o.a)(h),[{network:i.network.toLowerCase(),id:b}]),s({type:"CHANGE_VALUE",payload:{name:"listTransaction",value:p}}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(0),s({type:"CANNOT_SUBMIT_XDR"});case 25:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,c,a,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(y.isConnected)()){e.next=27;break}return t="",n="",c="",e.prev=4,e.next=7,Object(y.getPublicKey)();case 7:return t=e.sent,e.next=10,Object(y.getNetwork)();case 10:return"TESTNET"===(n=e.sent)?c="https://horizon-testnet.stellar.org/accounts/".concat(t):"PUBLIC"===n&&(c="https://horizon.stellar.org/accounts/".concat(t)),e.next=14,O(c).then((function(e){return e.balances}));case 14:a=e.sent,i=[],a.forEach((function(e){"native"===e.asset_type?i.push({balance:e.balance,code:"XLM",issuer:"None"}):"liquidity_pool_shares"!==e.asset_type&&"0.0000001"!==e.balance&&i.push({balance:e.balance,code:e.asset_code,issuer:e.asset_issuer})})),"account",s({type:"CHANGE_VALUE",payload:{name:"account",value:{publicKey:t,listAsset:i,network:n}}}),e.next=25;break;case 22:e.prev=22,e.t0=e.catch(4),s({type:"CANNOT_LOGIN"});case 25:e.next=28;break;case 27:s({type:"FREIGHTER_NOT_INSTALLED"});case 28:case"end":return e.stop()}}),e,null,[[4,22]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(i&&m&&r&&b&&m>=0){var e=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="amountReceive",e.next=4,O(t).then((function(e){return e.amount_receive}));case 4:c=e.sent,s({type:"CHANGE_VALUE",payload:{name:n,value:c}}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),s({type:"CANNOT_GET_AMOUNT_RECEIVE"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),t="https://ph7wlb.deta.dev/fetch_amount_receive?",n=[];n.push("asset_send_code=".concat(r.code,"&")),"XLM"!==r.code&&n.push("asset_send_issuer=".concat(r.issuer,"&")),n.push("asset_receive_code=".concat(b.code,"&")),"XLM"!==b.code&&n.push("asset_receive_issuer=".concat(b.issuer,"&")),n.push("amount_send=".concat(m,"&")),"TESTNET"===i.network?n.push("is_testnet=".concat(!0)):"PUBLIC"===i.network&&n.push("is_testnet=".concat(!1)),n.forEach((function(e){t+=e})),e(t);var c=setInterval((function(){e(t)}),1e4);return function(){return clearInterval(c)}}if(!m){s({type:"CHANGE_VALUE",payload:{name:"amountReceive",value:""}})}}),[m,r,b,i]),Object(p.jsxs)(a.a.Fragment,{children:[i?Object(p.jsx)(j,{publicKey:i.publicKey,loginFreighter:v}):Object(p.jsx)(j,{}),Object(p.jsx)(x,{state:n,handleSubmit:function(e){if(e.preventDefault(),i&&r&&b&&m){s({type:"PROCESSING_TRANSACTION"});var t="https://ph7wlb.deta.dev/fetch_xdr?",n=[];n.push("public_key=".concat(i.publicKey,"&")),n.push("asset_send_code=".concat(r.code,"&")),"XLM"!==r.code&&n.push("asset_send_issuer=".concat(r.issuer,"&")),n.push("asset_receive_code=".concat(b.code,"&")),"XLM"!==b.code&&n.push("asset_receive_issuer=".concat(b.issuer,"&")),n.push("amount_send=".concat(m,"&")),f?n.push("slippage=".concat(f,"&")):n.push("slippage=0.01&"),"TESTNET"===i.network?n.push("is_testnet=".concat(!0)):"PUBLIC"===i.network&&n.push("is_testnet=".concat(!1)),n.forEach((function(e){t+=e})),N(t)}else i&&s({type:"NO_VALUE"})},handleChange:function(e){var t=e.target.name,n=e.target.value;if("amountSend"===t||"amountReceive"===t||"slippage"===t)n=n?parseFloat(n):"";else if("assetSend"===t||"assetReceive"===t){var c=n.split("_"),a=Object(d.a)(c,3);n={balance:a[0],code:a[1],issuer:a[2]}}s({type:"CHANGE_VALUE",payload:{name:t,value:n}})},loginFreighter:v,closeNotification:function(){s({type:"CLOSE_NOTIFICATION"})},setMaxBalance:function(){var e=r.balance;s({type:"CHANGE_VALUE",payload:{name:"amountSend",value:e}})}})]})},L=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,485)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root")),L()}},[[484,1,2]]]);
//# sourceMappingURL=main.87423a68.chunk.js.map