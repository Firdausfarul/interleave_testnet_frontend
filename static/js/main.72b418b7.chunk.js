(this.webpackJsonpinterleave_testnet_frontend=this.webpackJsonpinterleave_testnet_frontend||[]).push([[0],{199:function(e,t,n){},200:function(e,t,n){},251:function(e,t){},252:function(e,t){},445:function(e,t){},447:function(e,t){},481:function(e,t,n){"use strict";n.r(t);var c=n(15),a=n.n(c),r=n(193),s=n.n(r),o=(n(199),n(200),n.p+"static/media/Neptunus Text Right 1.7e349a79.png"),i=n(1),u=function(){return Object(i.jsx)("nav",{className:"navbar",children:Object(i.jsx)("div",{className:"navbar-logo",children:Object(i.jsx)("img",{src:o,alt:"logo"})})})},l=n(6),d=n(23),p=n.n(d),O=n(50),j=n(69),b=function(e){var t=e.modalContent,n=e.closeModal;return Object(c.useEffect)((function(){setTimeout((function(){n()}),3e3)})),Object(i.jsx)("div",{className:"modal",children:t})},m=[{code:"XLM",issuer:"GAZDAUCRI3E7APVYGOPLLS6CMMCCXTUZ6ZKWPOS2EMOOGIGOIQWHWYTQ"},{code:"LSP",issuer:"GAZDAUCRI3E7APVYGOPLLS6CMMCCXTUZ6ZKWPOS2EMOOGIGOIQWHWYTQ"},{code:"AQUA",issuer:"GAZDAUCRI3E7APVYGOPLLS6CMMCCXTUZ6ZKWPOS2EMOOGIGOIQWHWYTQ"},{code:"TERN",issuer:"GAZDAUCRI3E7APVYGOPLLS6CMMCCXTUZ6ZKWPOS2EMOOGIGOIQWHWYTQ"},{code:"USDC",issuer:"GAZDAUCRI3E7APVYGOPLLS6CMMCCXTUZ6ZKWPOS2EMOOGIGOIQWHWYTQ"},{code:"YBX",issuer:"GAZDAUCRI3E7APVYGOPLLS6CMMCCXTUZ6ZKWPOS2EMOOGIGOIQWHWYTQ"}],v=n(49),f=function(e,t){if("SUCCESS_SUBMIT"===t.type)return Object(l.a)(Object(l.a)({},e),{},{isModalOpen:!0,modalContent:"success submit xdr"});if("CANNOT_SUBMIT"===t.type)return Object(l.a)(Object(l.a)({},e),{},{isModalOpen:!0,modalContent:"cannot submit xdr"});if("NO_VALUE"===t.type)return Object(l.a)(Object(l.a)({},e),{},{isModalOpen:!0,modalContent:"please enter value"});if("CHANGE_VALUE"===t.type){var n=t.payload,c=n.name,a=n.value;if("assetSend"===c||"assetReceive"===c){var r=a.split("_"),s=Object(j.a)(r,2),o=s[0],i=s[1];return Object(l.a)(Object(l.a)({},e),{},Object(v.a)({},c,{code:o,issuer:i}))}return Object(l.a)(Object(l.a)({},e),{},Object(v.a)({},c,a))}return"ERROR_FETCH"===t.type?Object(l.a)(Object(l.a)({},e),{},{isModalOpen:!0,modalContent:"cannot fetch url"}):"CLOSE_MODAL"===t.type?Object(l.a)(Object(l.a)({},e),{},{isModalOpen:!1,modalContent:""}):void 0},h={publicKey:null,assetSend:null,assetReceive:null,amountSend:"",amountReceive:"",slippage:"",xdr:null,isModalOpen:!1,modalContent:null},C=function(e){return Object(i.jsx)(i.Fragment,{children:Object(i.jsx)("option",{value:"".concat(e.code,"_").concat(e.issuer),children:e.code})})},x=n(194),y=n.n(x),_=n(70),A=n(104),E=n.n(A),S=function(){var e=Object(c.useReducer)(f,h),t=Object(j.a)(e,2),n=t[0],a=t[1],r=n.publicKey,s=n.assetSend,o=n.assetReceive,u=n.amountSend,d=n.amountReceive,v=n.slippage,x=n.xdr,A=n.isModalOpen,S=n.modalContent,g=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,y.a.get(t);case 3:return n=e.sent,c=n.data,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0),a({type:"ERROR_FETCH"});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c,r,s,o,i,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n="xdr",e.next=4,g(t);case 4:return c=e.sent,r=c.xdr,console.log(n,r),a({type:"CHANGE_VALUE",payload:{name:n,value:r}}),e.next=10,Object(_.signTransaction)(x,"TESTNET");case 10:return r=e.sent,a({type:"CHANGE_VALUE",payload:{name:n,value:r}}),console.log("the transaction",x),s="https://horizon-testnet.stellar.org",o=new E.a.Server(s),i=E.a.TransactionBuilder.fromXDR(x,s),e.next=18,o.submitTransaction(i);case 18:u=e.sent,console.log(u),a({type:"SUCCESS_SUBMIT"}),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),a({type:"CANNOT_SUBMIT"});case 26:case"end":return e.stop()}}),e,null,[[0,23]])})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t=e.target.name,n=e.target.value;"amountSend"!==t&&"amountReceive"!==t&&"slippage"!==t||(n=n?parseFloat(n):""),a({type:"CHANGE_VALUE",payload:{name:t,value:n}})},G=function(){var e=Object(O.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",n="",e.prev=2,e.next=5,Object(_.getPublicKey)();case 5:t=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),n=e.t0;case 11:if(!n){e.next=13;break}return e.abrupt("return",n);case 13:"publicKey",a({type:"CHANGE_VALUE",payload:{name:"publicKey",value:t}});case 16:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(O.a)(p.a.mark((function e(t){var n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="amountReceive",e.next=3,g(t).then((function(e){return e.amount_receive}));case 3:c=e.sent,a({type:"CHANGE_VALUE",payload:{name:n,value:c}});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){if(u&&s&&o){var e="https://wy6y1k.deta.dev/fetch_amount_receive?",t=[];t[0]="asset_send_code=".concat(s.code,"&"),t[1]="asset_send_issuer=".concat(s.issuer,"&"),t[2]="asset_receive_code=".concat(o.code,"&"),t[3]="asset_receive_issuer=".concat(o.issuer,"&"),t[4]="amount_send=".concat(u),t.forEach((function(t){e+=t})),L(e);var n=setInterval((function(){L(e)}),1e4);return function(){return clearInterval(n)}}if(!u){a({type:"CHANGE_VALUE",payload:{name:"amountReceive",value:""}})}}),[u,s,o]),Object(i.jsxs)(i.Fragment,{children:[Object(_.isConnected)()&&Object(i.jsx)("h1",{children:"user connected"}),r&&Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("h1",{children:r}),Object(i.jsx)("button",{onClick:function(){a({type:"CHANGE_VALUE",payload:{name:"publicKey",value:null}})},children:"logout"})]}),A&&Object(i.jsx)(b,{closeModal:function(){a({type:"CLOSE_MODAL"})},modalContent:S}),Object(i.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),r&&s&&o&&u&&d&&v){var t="https://wy6y1k.deta.dev/fetch_xdr?",n=[];n[0]="public_key=".concat(r,"&"),n[1]="asset_send_code=".concat(s.code,"&"),n[2]="asset_send_issuer=".concat(s.issuer,"&"),n[3]="asset_receive_code=".concat(o.code,"&"),n[4]="asset_receive_issuer=".concat(o.issuer,"&"),n[5]="amount_send=".concat(u,"&"),n[6]="slippage=".concat(v),n.forEach((function(e){t+=e})),M(t)}else r&&a({type:"NO_VALUE"})},children:[Object(i.jsxs)("div",{className:"form-control",children:[Object(i.jsx)("label",{htmlFor:"amountSend",children:"Amount Send"}),Object(i.jsx)("input",{type:"number",step:1e-7,id:"amountSend",name:"amountSend",value:u,onChange:T,placeholder:"0.0000000"})]}),Object(i.jsx)("div",{className:"form-control",children:Object(i.jsxs)("select",{name:"assetSend",onChange:T,children:[Object(i.jsx)("option",{value:"",children:"Select Asset Type"}),m.map((function(e){return Object(i.jsx)(C,Object(l.a)({},e),e.code)}))]})}),Object(i.jsxs)("div",{className:"form-control",children:[Object(i.jsx)("label",{htmlFor:"amountReceive",children:"Amount Receive"}),Object(i.jsx)("input",{type:"number",step:1e-7,id:"amountReceive",name:"amountReceive",value:d,onChange:T,placeholder:"0.0000000"})]}),Object(i.jsx)("div",{className:"form-control",children:Object(i.jsxs)("select",{name:"assetReceive",onChange:T,children:[Object(i.jsx)("option",{value:"",children:"Select Asset Type"}),m.map((function(e){return Object(i.jsx)(C,Object(l.a)({},e),e.code)}))]})}),Object(i.jsxs)("div",{className:"form-control",children:[Object(i.jsx)("label",{htmlFor:"slippage",children:"Slippage : "}),Object(i.jsx)("input",{type:"number",step:.01,id:"slippage",name:"slippage",value:v,onChange:T,placeholder:"value between 0-1",max:"1.00",min:"0.00"})]}),r?Object(i.jsx)("button",{type:"submit",children:"submit"}):Object(i.jsx)("button",{onClick:G,children:"login"})]})]})};var g=function(){return Object(i.jsxs)(a.a.Fragment,{children:[Object(i.jsx)(u,{}),Object(i.jsx)(S,{})]})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,482)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};s.a.render(Object(i.jsx)(a.a.StrictMode,{children:Object(i.jsx)(g,{})}),document.getElementById("root")),M()}},[[481,1,2]]]);
//# sourceMappingURL=main.72b418b7.chunk.js.map